syntax = "proto3";
import "nanopb.proto";

message Packet {    
  oneof content {
    Config config = 1;
    Frame frame = 2;
  }
}

message Config {
  bytes color_palette = 1 [(nanopb).max_size = 256]; // Series of RGBW values.

  uint32 easing_interval_ms = 2;

  EasingMode pixel_easing = 3;
  EasingMode brightness_easing = 4 [deprecated = true];

  bool show_test_frame = 5;
  uint32 config_phash = 6;
}

message Frame {
  bytes data = 1 [(nanopb).max_size = 640]; // Selects pixel colors from the palette. First pixel is top left. 
}

enum EasingMode {
  LINEAR = 0;
	EASE_IN_QUAD = 1;
	EASE_OUT_QUAD = 2;
	EASE_IN_OUT_QUAD = 3;
	EASE_IN_CUBIC = 4;
	EASE_OUT_CUBIC = 5;
	EASE_IN_OUT_CUBIC = 6;
	EASE_IN_QUART = 7;
	EASE_OUT_QUART = 8;
	EASE_IN_OUT_QUART = 9;
	EASE_IN_QUINT = 10;
	EASE_OUT_QUINT = 11;
	EASE_IN_OUT_QUINT = 12;
	EASE_IN_EXPO = 13;
	EASE_OUT_EXPO = 14;
	EASE_IN_OUT_EXPO = 15;
}

message ResponsePacket {
  oneof content {
    ClientInfo client_info = 1;
    RemoteLog remote_log = 2;
  }
}

message ClientInfo {
  string hostname = 1 [(nanopb).max_length = 20];
  string build_time = 2 [(nanopb).max_length = 20];
  int32 panel_index = 3;
  int32 fps = 4;
  uint32 config_phash = 5;
}

message RemoteLog {
  string message = 1 [(nanopb).max_length = 100];
}

